{% assign option_index = 0 %}

{% for option in product.options %}
  {% assign downcased_option = option | downcase %}
  {% if downcased_option contains 'color' %}
    {% assign option_index = forloop.index0 %}
  {% endif %}
{% endfor %}

<div class="swatch-container"
  data-index="{{ option_index }}"
  data-single-option-selector>
  {% assign values = '' %}
  {% for variant in product.variants %}
    {% assign value = variant.options[option_index] %}
    {% unless values contains value %}
      {% assign values = values | join: ',' %}
      {% assign values = values | append: ',' | append: value %}
      {% assign values = values | split: ',' %}
      <label data-value="{{ value | escape }}" class="swatch color-swatch {% unless variant.available %}unavailable{% endunless %}">
        <input
          id="color-swatch-{{ value | handle }}"
          type="radio"
          name="color-option"
          value="{{ value | escape }}"
          {% if forloop.first %}checked{% endif %}
          {% unless variant.available %}disabled{% endunless %}>
        <span class="swatch-content"></span>
      </label>
    {% endunless %} 
  {% endfor %}
</div>