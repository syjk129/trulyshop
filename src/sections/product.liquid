<div data-section-id="{{ section.id }}" data-section-type="product" data-enable-history-state="true">

  {%- assign current_variant = product.selected_or_first_available_variant -%}
  {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

  <div class="product">
    <div class="product-images">
      {% for image in product.images %}
        <img src="{{ image | img_url: '480x480' }}">
      {% endfor %}
    </div>
    <div class="product-details">
      <div class="callout">{{ product.vendor }}</div>
      <h3>{{ product.title }}</h3>
      <div class="body1 price">{{ product.price | money }}</div>
      <div class="divider"></div>
      <form action="/cart/add" method="post" enctype="multipart/form-data">
        <div class="js">
          <div class="body2 select-label">{{ 'product.choose_color' | t }}</div>
          {% include 'color-swatch' %}
          <div class="divider"></div>
          <div class="body2 select-label">{{ 'product.choose_size' | t }}</div>
          {% include 'size-swatch' %}
          <div class="divider"></div>
        </div>
        <div class="no-js">
          <select name="id" class="no-js" data-product-select>
            {% for variant in product.variants %}
              <option
                {% if variant == current_variant %}selected="selected"{% endif %}
                {% unless variant.available %}disabled="disabled"{% endunless %}
                value="{{ variant.id }}">
                  {{ variant.title }}
              </option>
            {% endfor %}
          </select>
        </div>
        <div class="body2 select-label">{{ 'product.quantity' | t }}</div>
        <input class="quantity" type="number" id="Quantity" name="quantity" value="1" min="1">
        <button
          class="btn large add-to-cart"
          type="submit"
          name="add"
          {% unless current_variant.available %}disabled="disabled"{% endunless %}>
            <span data-add-to-cart-text>
              {% if current_variant.available %}
                {{ 'product.add_to_cart' | t }}
              {% else %}
                {{ 'product.sold_out' | t }}
              {% endif %}
            </span>
        </button>
      </form>

      <div class="callout">{{ 'product.details' | t }}</div>
      <div class="rte product-description">{{ product.description }}</div>

      {% unless product == empty %}
        <script type="application/json" data-product-json>
          {{ product | json }}
        </script>
      {% endunless %}
      </div>
    </div>
  </div>
</div>

<script>
  const selectCallback = (variant, selector) => {
    console.log("select callback");
  }
</script>

{% schema %}
  {
    "name": "Product pages",
    "settings": [
      {
        "type": "checkbox",
        "id": "show_share_buttons",
        "label": "Show social sharing buttons",
        "default": true
      }
    ]
  }
{% endschema %}
